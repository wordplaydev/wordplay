تابع حالة اللعبة

تتتبع معظم الألعاب عدة أمور مع تقدم اللعبة: النقاط، ومواقع اللاعبين، وتفاصيل أخرى كلها أمور أساسية.في كل مرة يتم فيها إدخال بيانات، تتغير تلك الحالة، ثم نريد عرض مخرجات جديدة استجابةً لذلك.

النمط العام لأي لعبة يقوم بثلاثة أشياء:

• قم بتعريف بنية بيانات حالة اللعبة، لتخزين جميع حالات اللعبة• حدد رد فعل يُنشئ حالة لعبة جديدة بناءً على حالة اللعبة السابقة كلما كان هناك مدخل جديد• قم بعمل @Stage  مع  @Group  و  @Phrase لعرض حالة اللعبة

على سبيل المثال، لنتخيل لعبة بسيطة تتضمن كتابة كلمات سرية في مربع نص، والحصول على نقطة في كل مرة يتم فيها تخمين كلمة سرية:

\•Game(secrets•[''] points•#)
state: Game(['قطة' 'كلب'] 0) … state.secrets.has(Chat()) … state.points:state.points + 1
Stage(state.points = state.secrets.length() ? [Phrase("لقد فزت!")] [
			Group(Stack() [
					Phrase("خمن كلماتي السرية")
					Phrase(`\state.secrets.length() - state.points\المزيد من الأسرار`)
				])
		])\

دعونا نحلل هذا الأمر.

• السطر الأول،\•Game(secrets•[''] points•#)\يقول،/أنشئ بنية بيانات تسمى\Game\الذي يخزن قائمة بالأسرار والنقاط/• السطر الثاني يقول/تبدأ حالة اللعبة بقائمة من الأسرار وصفر من النقاط. في كل مرة\Chat\إذا كانت الكلمة المدخلة موجودة في قائمة الأسرار، فسيتم إنشاء حالة لعبة جديدة مع زيادة النقاط بمقدار واحد./.• في كل مرة يُعاد فيها تقييم البرنامج (عندما\Chat\(في حال حدوث تغييرات)، اعرض مرحلة. إذا كان عدد النقاط مساويًا لعدد الأسرار، اعرض مرحلة الفوز. وإذا لم يكن كذلك، اعرض رسالة وعدد الأسرار المتبقية.

هذا المثال به بعض المشاكل:

• إذا خمنوا كلمة سرية عدة مرات، يحصلون على نقاط أكثر! قد تحتاج حالة اللعبة لدينا أيضًا إلى تذكر ما تم تخمينه، لذلك يتم احتساب كل كلمة مرتين فقط.• إذا أدخل اللاعب عدة كلمات، فهل يجب احتسابها؟

من شأن حالات اللعبة الأكثر تطوراً وتحديثات اللعبة أن تساعدنا في التعامل مع هذه الحالات.

track-points