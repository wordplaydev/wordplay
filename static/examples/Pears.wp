æ²™æ¢¨ (Pears)
=== start/en
Â¶This is an interactive short story. It defines several
distinct scenes and moves between them based on different
interactions, like clicks, collisions, and other actions.
Part of the fun of experiencing the story is discovering the
interactions necessary to advance the story.Â¶
exposition: [
		Phrase(`My Dad wanted to leave.` place: ðŸ“(-9m 0m))
	]

conflict: [
		Phrase(`"Mom", we gotta go.` place: Place(-8m 7m))
		Phrase(`/"Take go home."/` place: Place(1m 4m))
		Phrase(`"Mom we don't want anything!"` place: Place(-8m 1m))
		Phrase(`"Take go home!"` size: 2m place: Place(-6m -4m) resting: Sequence(shake()))
	]

risingAction1: [
		Phrase(`My ç‚®ç‚®ðŸ‘µðŸ½ stepped into the backyard` place: Place(-9m 7m))
		Phrase(`I followed her, curious` place: Place(-6m 4m))
		Phrase(`/"æ²™æ¢¨ðŸ, take go home!"/` place: Place(-3m 1m))
		Phrase(`ðŸ‘µðŸ½` name: 'paupau' size: 2m matter: Matter() place: Place(6m -6m))
		Phrase(`ðŸ‘§ðŸ»` name: 'me' size: 1m matter: Matter() place: Placement(Place(-8m -6m)))
	]

risingAction2: [
		Phrase(`She stopped at a small tree.` place: Place(-9m 6m))
		Phrase(`On it tangled dozens of bright yellow æ²™æ¢¨` place: Place(-9m 1m) wrap: 10m)
		Phrase(`"Mom, we don't want any pears."` size: .75m place: Place(-4m 0m))
		Phrase(`/I wanted a pear./` size: 2m place: Place(-8m -3m))
		Phrase("ðŸ" size: 2m place: Place(-1m -7m) name: 'pear' selectable: âŠ¤)
	]

Â¶We determine places in advance so we can make them fall from the same spot.Â¶
places: (6 â†’ []).translate(Æ’() Place(Random(-2m 2m) Random(-3m -5m)))
climax: [
		Phrase(`She kneeled in the dirt.` place: Place(-9m 6m))
		Phrase(`Grabbed a knife` place: Place(-9m 4m))
		Phrase(`And carefully cut six` place: Place(-9m 2m))
		Phrase(`Dropping them into her basket below` place: Place(-9m 0m))
		Phrase("ðŸ§º" size: 4m place: Place(-2m -12m))
		Phrase("ðŸŒ³" name: "tree" size: 5m place: Place(-3m -7m) selectable: âŠ¤)
		:places.translate(
			Æ’(place index)
				Phrase(
					"ðŸ"
					name: "pear\index\"
					place: Choice() = 'tree' ? Motion(place) place
				)
		)
		Phrase("ðŸ”ª" place: Pointer())
	]

resolution: [
		Phrase(`She carried them to me` place: Place(-9m 6m))
		Phrase(`Kneeled down to me` place: Place(-8m 4m))
		Phrase(`And handed me the basket` place: Place(-7m 2m))
		Phrase(`/"Take go home"/` place: Place(0m -2m))
	]

credits: [
		Phrase(`by /Amy J. Ko/`)
	]

story: [
		exposition
		conflict
		risingAction1
		risingAction2
		climax
		resolution
		credits
	]

Â¶Keep track of clicks and tapsÂ¶
click: âˆ† Button()
Â¶Keep track of how long after the tree is clickedÂ¶
timeAfterCut: 0ms â€¦ Choice() = 'tree' â€¦ Time(1000ms)
Â¶Track when we reach Pau PauÂ¶
atPauPau: âˆ† Collision('me')
Â¶Track when the pear is chosenÂ¶
chosePear: Choice() = 'pear'
Â¶Change the segment based on the current segmentÂ¶
segmentâ€¢#:
	1 â€¦
	. ???
		1: click
		2: click
		3: atPauPau
		4: chosePear
		5: timeAfterCut > 1500ms
		6: âˆ† Button()
		âŠ¥
		â€¦ segment + 1

Stage(
	story[segment]
	face: 'Arvo'
	place: Place(0m 0m -20m)
	frame: Rectangle(-10m 10m 10m -10m)
)